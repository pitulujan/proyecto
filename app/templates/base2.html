{% extends 'bootstrap/base.html' %}
{% block title %}
    {% if title %}{{ title }} - Proyecto{% else %}Proyecto{% endif %}
{% endblock %}
{% block navbar %}
<script src="{{bootstrap_find_resource('jquery.js', cdn='jquery')}}"></script>
<script src="{{bootstrap_find_resource('js/bootstrap.js', cdn='bootstrap')}}"></script>
<link rel="stylesheet" href="/static/base.css">
<body>
 
  <nav class="navbar navbar-inverse navbar-fixed-top " >
    <div class="container-fluid ">
      <div class="row">

        <div class="navbar-header col-md-4 col-xs-4" style="padding-left:0px;">
            {% if current_user.is_authenticated %}
            <a class="navbar-brand" href="#menu-toggle" style="font-size: 20px; display: flex;justify-content: flex-start;" id="menu-toggle"><span class="glyphicon glyphicon-list" aria-hidden="true"></span></a>
            {%else%}
             <a class="navbar-brand" href="#" style="font-size: 20px; display: flex;justify-content: flex-start;"><span class="glyphicon glyphicon-list" aria-hidden="true"></span></a>
               {%endif%}
            }
        </div>
        
        <div class="navbar-header col-md-4 col-xs-4" style="display: flex;justify-content: center;"> 
		     	
		            <a id="hormin" class="navbar-brand" style="font-size: 20px;"></a>
		        
		 </div>
        
        {% if current_user.is_authenticated %}
        <div class="navbar-header hidden-xs col-md-4 col-sm-4" style="display: flex;justify-content: flex-end;" > 
          <a href="{{ url_for('logout') }}" style="font-size: 20px;padding-right: 0px;" class="navbar-brand" Onclick="return ConfirmLogout();"><span  class="glyphicon glyphicon-log-out "></span> Log Out</a>
        </div>
        
        <div class="navbar-header hidden-md hidden-sm hidden-lg col-xs-4 " style="display: flex;justify-content: flex-end;"> 

          <a href="{{ url_for('logout') }}" style="font-size: 20px;padding-right: 0px;" class="navbar-brand" Onclick="return ConfirmLogout();" ><span  class="glyphicon glyphicon-log-out "></span></a>
        </div>
      {%endif%}
      
      
      
      </div>
           </div>

</nav>

<div id="wrapper" class="toggled" > 
	
    <div class="container-fluid">
        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            {% if current_user.is_authenticated %}
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <br>
                </li>
                <li class="sidebar-brand">
                    <a href="#" class="navbar-brand">
                        <span class="glyphicon glyphicon-user" aria-hidden="true"></span> Profile
                    </a>
                </li>
                <li>
                    <a href="{{ url_for('index') }}"><span class="glyphicon glyphicon-home" aria-hidden="true"></span>   Home</a>
                </li>
                <li>
                    <font color="#337AB7"> STATISTICS</font>
                </li>
                <li>
                    <a href="#"><span class="glyphicon glyphicon-tasks" aria-hidden="true"></span> Reports</a>
                </li>
                <li>
                    <a href="#"><span class="glyphicon glyphicon-stats" aria-hidden="true"></span> Statistic</a>
                </li>
                <li>
                  <font color="#337AB7"> ADMINISTRATION</font>
                </li>
                
                <li>
                  <a href="{{url_for('schedule_events')}}"><span class="glyphicon glyphicon-calendar" aria-hidden="true"></span> Tasks</a>
                </li>
                 <li>
                  <a href="#"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Add Device</a>
                </li>
                <button class="dropdown-btn" data-toggle="collapse" id="prueba2"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Parameters 
                    <i class="glyphicon glyphicon-triangle-bottom" id="pato" style="font-size: 20px" aria-hidden="true"></i>
                </button>
                <div class="dropdown-container collapse" >
                    <li>
                        <a href="{{ url_for('set_temperature') }}"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Temperature</a>
                    </li>
                    <li>
                        <a href="{{ url_for('set_lights') }}"><span class="glyphicon glyphicon-flash" aria-hidden="true"></span> Lights</a>
                    </li>
                </div>
                
                <button class="dropdown-btn" data-toggle="collapse" id="prueba"><span  class="glyphicon glyphicon-cog" ></span> Settings 
                    <i class="glyphicon glyphicon-triangle-bottom" id="pato" style="font-size: 20px" aria-hidden="true"></i>
                </button>
                <div class="dropdown-container collapse" >
                    <li><a href="{{ url_for('change_password') }}"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span> Password</a></li>
                    {% if  current_user.admin == 1 %}
                     <li><a href="{{ url_for('register') }}"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> New User</a></li>
                     <li><a href="{{ url_for('delete_user') }}"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete User</a></li>
                     {%endif%}
                </div>
                
                {%endif%}
                </div>

                
            
           
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper" style="padding-top: 50px;">
            
                
                <div class="row">
                    <div class="col-lg-12" style="padding-left: 0px;">
                    	{% with messages = get_flashed_messages() %}
        {% if messages %}
           
            <div class="alert alert-info" role="alert">{{  messages|first }}</div>
           
        {% endif %}
        {% endwith %}

                      {% block app_content %}
                       {% endblock %}
                       {%- block footer %}<center>Proyecto 2018</center>{%- endblock footer %}
            
                    </div>
                </div>
            
        </div>
        <!-- /#page-content-wrapper -->
    </div>
</div>
<!-- /#wrapper -->
</body>
<script >



  $(document).ready(function() {
// Making 2 variable month and day
var monthNames = [ "Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre" ]; 
var dayNames= ["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"]

// make single object
var newDate = new Date();
// make current time
newDate.setDate(newDate.getDate());
// setting date and time
$('#Date').html(dayNames[newDate.getDay()] + " " + newDate.getDate() + ' ' + monthNames[newDate.getMonth()] + ' ' + newDate.getFullYear());
$('#Date2').html(newDate.getDate() + '/' + newDate.getMonth() + '/' + newDate.getFullYear());

setInterval( function() {
// Create a newDate() object and extract the seconds of the current time on the visitor's
var seconds = new Date().getSeconds();
// Add a leading zero to seconds value
$("#sec").html(( seconds < 10 ? "0" : "" ) + seconds);
},1000);

setInterval( function() {
// Create a newDate() object and extract the minutes of the current time on the visitor's
var minutes = new Date().getMinutes();
var hours = new Date().getHours();
// Add a leading zero to the minutes value
$("#hormin").html(( hours < 10 ? "0" : "" ) + hours +":"+( minutes < 10 ? "0" : "" ) + minutes);
},1000);

setInterval( function() {
// Create a newDate() object and extract the hours of the current time on the visitor's
var hours = new Date().getHours();
// Add a leading zero to the hours value
$("#hours").html(( hours < 10 ? "0" : "" ) + hours);
}, 1000); 
});

var dropdown = document.getElementsByClassName("dropdown-btn");
var i;

for (i = 0; i < dropdown.length; i++) {
  dropdown[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var dropdownContent = this.nextElementSibling;
    if (dropdownContent.style.display === "block") {
      dropdownContent.style.display = "none";
    } else {
      dropdownContent.style.display = "block";
    }
  });
}

$('#prueba').on('click', function(){
    var iSelector = $(this).find('i:first');
    if(iSelector.hasClass('glyphicon glyphicon-triangle-bottom')) {
        iSelector.removeClass('glyphicon glyphicon-triangle-bottom')
        iSelector.addClass('glyphicon glyphicon-triangle-top')
    }else{
        iSelector.removeClass('glyphicon glyphicon-triangle-top')
        iSelector.addClass('glyphicon glyphicon-triangle-bottom')

    }


});
$('#prueba2').on('click', function(){
    var iSelector = $(this).find('i:first');
    if(iSelector.hasClass('glyphicon glyphicon-triangle-bottom')) {
        iSelector.removeClass('glyphicon glyphicon-triangle-bottom')
        iSelector.addClass('glyphicon glyphicon-triangle-top')
    }else{
        iSelector.removeClass('glyphicon glyphicon-triangle-top')
        iSelector.addClass('glyphicon glyphicon-triangle-bottom')

    }


});

  function ConfirmLogout(){
        return confirm("Are you sure you want to logout?");
    }
  $("#menu-toggle").click(function(e) {

       
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");

        
    });
</script>

{% endblock %}


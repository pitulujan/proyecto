<!--https://stackoverflow.com/questions/10626885/passing-data-to-a-bootstrap-modal  https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_datetime-local_defaultvalue-->
{% extends 'base2.html' %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block app_content %}


<style type="text/css">
	.modal-body .form-horizontal .col-sm-2,
.modal-body .form-horizontal .col-sm-10 {
    width: 100%

}

.modal-body .form-horizontal .control-label {
    text-align: left;
}
.modal-body .form-horizontal .col-sm-offset-2 {
    margin-left: 15px;
}
</style>
    
    <div class="row">
      <div class="col-md-2 col-xs-2" style="padding-left:0px;">
            
            <a class="navbar-brand" style="font-size: 20px; display: flex;justify-content: flex-start;" id="edit"> Edit</span></a>
            
              </div>

         <div class="navbar-header col-md-8 col-xs-8" style="display: flex;justify-content: center;"> 
		     	
		            <a  class="navbar-brand" style="font-size: 20px;color:#333"><span class="glyphicon glyphicon-calendar"></span> {{ title}}</a>
		        
		 </div>

		 <div class="navbar-header col-md-2 col-xs-2" style="display: flex;justify-content: flex-end;padding-right: 0px;"> 
		     	
		            <a class="navbar-brand addevent"  href="#"  style="font-size: 20px;padding-right: 0px;"><span class="glyphicon glyphicon-plus"></span></a>
		        
		 </div>
    </div>

<div class="row">
	<table class="table">
    <tbody>
      {%for event in scheduled_events:%}
    <tr><td>
   
    <div class="col-xs-6" style="display: flex;justify-content: flex-start;padding-left: 10px;">
     <h1> <span class="glyphicon glyphicon-minus-sign del" style="color: #f70707;display:none;padding-right: 10px;font-size: 25px;" id="del{{event.pid}}"></span>  {{event.event_date}}</h1>
    
   </div>
   <div class="col-xs-6" style="display: flex;justify-content: flex-end;padding-right: 0px;">
   <h1 style="margin-top: 10px;"><span class="glyphicon glyphicon-menu-right editevent" href="#" style="color: #333;font-size: 15px;display:none;" id="cont{{event.pid}}"></span> </h1>



    <form action="" method="POST" ><button  class="btn btn-danger btn-block delevent" Onclick="return ConfirmDelete();" id="cont2{{event.pid}}" style="display: none;margin-top: 20px;" type="submit" value ="" name="delete" ><span class="glyphicon glyphicon-trash"></span> Delete</button> </form>
   
   </div>
</tr></td>
      {%endfor%}
</tbody>
</table>
</div>

{%for event in scheduled_events:%}

<p>{{event.user}}</p>
{%endfor%}


<!-- Modal -->
<div class="modal fade" id="modalschedule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" style="margin-top: 60px;">
            <!-- Modal Header -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                       <span aria-hidden="true">&times;</span>
                       <span class="sr-only">Close</span>
                </button>
                <center><h4 class="modal-title" id="myModalLabel">Schedule New Event</h4></center>
            </div>
            
            <!-- Modal Body -->
            <div class="modal-body">
                
                <form role="form" action="" method="POST" id="form_id">
                  <div class="form-group">
                    <label for="dateid">Select Day & Time</label>
                      <input type="datetime-local" class="form-control" id="dateid" name="mail"/>
                  </div>
                  <div class="form-group">
                    <label for="exampleInputPassword1">Password</label>
                      <input type="password" class="form-control"
                          id="exampleInputPassword1" name="pass" placeholder="Password"/>
                  </div>
          
                
                
            </div>
            
            <!-- Modal Footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">
                            Cancel
                </button>
                <button type="button" class="btn btn-primary" id=submit_event>
                    Save changes
                </button>
            </div>
        </div>
        </form>
    </div>
</div>
</div>
</div>

 
<script >
  $(document).ready(function(){
    $("#edit").click(function(){

        if ($("#edit").text()==' Edit'){
          $("#edit").text("Done");
          $(".del").toggle(500);
          //$("#del2").toggle(500);
          $(".editevent").toggle(500); }
        else{
          $("#edit").text(" Edit");
          $('.delevent').hide(500);
          $('.editevent').hide(500);
          $('.del').hide(500);} 
               
                });
      {%for event in scheduled_events:%}
       $("#del{{event.pid}}").click(function(){$("#cont2{{event.pid}}").toggle(500);$("#cont{{event.pid}}").toggle(500);});
       {%endfor%}
       $(".addevent").click(function(){$("#dateid").val("");$('#modalschedule').modal('show');});
       
       $(".editevent").click(function(){$("#dateid").val("");$('#modalschedule').modal('show');}); //-->falta editar para que saque la info de la futura lista de eventos
       
       $("#submit_event").click(function(){
        $.post("{{ url_for('schedule_events') }}",{'date':$("#dateid").val()});
        $('#modalschedule').modal('hide');


        });

  function ConfirmDelete(username){
        return confirm("Are you sure you want to delete this event?");}


});


 
     
</script>



    
{% endblock %}


